<div class = "container-fluid">
  <h2>Registration Form</h2>
  {{ registrationForm.value | json }}
  <form [formGroup] = "registrationForm">
    <div class = "form-group">
      <label>Username</label>
      <input [class.is-invalid] = "registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched"
      formControlName = "username" type = "text" class = "form-control">

      <!-- <small [class.d-none] = "registrationForm.get('username')?.valid || registrationForm.get('username')?.untouched"
       class = "text-danger">User Name is required.</small> -->

       <div *ngIf = "registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched">
         <small *ngIf = "registrationForm.get('username')?.errors?.required" class = "text-danger">Username is required.</small>
         <small *ngIf = "registrationForm.get('username')?.errors?.minlength" class = "text-danger">Please enter min length.</small>
         <small *ngIf = "registrationForm.get('username')?.errors?.forbiddenName" class = "text-danger">{{registrationForm.get('username')?.errors?.forbiddenName.value}} username not allowed</small>
       </div>
    </div>

    <div class = "form-group">
      <label>Password</label>
      <input [class.is-invalid] = "registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched"
      formControlName="password" type = "password" class = "form-control">

      <div *ngIf = "registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched">
        <div><small *ngIf = "registrationForm.get('password')?.errors?.required" class = "text-danger">Password is required</small></div>
        <div><small *ngIf = "registrationForm.get('password')?.errors?.hasSmallCase" class = "text-danger">Password must contain a small case letter.</small></div>
        <div><small *ngIf = "registrationForm.get('password')?.errors?.hasCapitalCase" class = "text-danger">Password must contain a large case letter.</small></div>
        <div><small *ngIf = "registrationForm.controls['password'].hasError('hasNumber')" class = "text-danger">Must contain atleast 1 number!</small></div>
        <div><small *ngIf = "registrationForm.get('password')?.errors?.minlength" class = "text-danger">Please enter min length.</small></div>
      </div>

    </div>

    <div formGroupName = "address">

      <div class = "form-group">
        <label>City</label>
        <input type = "text" class = "form-control" formControlName = "city">
      </div>

      <div class = "form-group">
        <label>State</label>
        <input type = "text" class = "form-control" formControlName = "state">
      </div>

      <div class = "form-group">
        <label>Postal Code</label>
        <input type = "number" class = "form-control" formControlName = "postalCode">
      </div>

    </div>

    <button class = "btn btn-primary" type = "Submit">Register</button>
    <button (click) = "loadAPIData()" class = "btn btn-secondary" type = "button">Load API data</button>
  </form>

</div>
